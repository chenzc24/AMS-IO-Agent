# Knowledge Base Index - AMS-IO-Agent

Comprehensive index of all knowledge files with detailed summaries.

---

## KB_CDAC - Capacitor/CDAC Design Automation

### Core Documentation

**KB_INDEX.md**
- Master index for the CDAC knowledge base defining loading strategies and module dependencies.
- Provides combinations of modules needed for different shapes (H-shape, I-type, Sandwich) and technologies (28nm, 180nm).
- Critical lazy loading policy: load universal modules (00, 01, 02) first, then load phase-specific and shape-specific modules only when needed.

**README.md**
- Overview of CDAC knowledge base organization and purpose.
- Explains the modular structure with universal modules, shape-specific modules, and technology configurations.
- Provides quick reference for which modules to use for different capacitor design tasks.

---

### Universal Modules (00-04) - Apply to All Shapes & Technologies

**00_Core_Principles.md**
- Defines foundational execution rules that must be strictly enforced for all capacitor designs.
- Contains critical requirements: step-by-step execution, ±1% convergence criterion, 5-iteration limit, automatic continuation policy.
- Specifies units (micrometers), error calculation formulas, and lazy knowledge loading strategy.

**01_Workflow_Framework.md**
- Defines the three-phase workflow: Phase 1 (Unit Capacitor), Phase 2 (Dummy Capacitor), Phase 3 (Array Generation).
- Each phase has mandatory knowledge loading steps: load modules → understand → execute (separate code blocks required).
- Includes library/cell naming policy (auto-generate names like C_MAIN_6fF), view naming convention (layout1-5 for iterations, final layout view mandatory).

**02_Python_SKILL_Integration.md**
- Defines Python/SKILL integration with critical SKILL flattening policy: all SKILL scripts must be generated by Python, no loops/conditionals/functions allowed in SKILL.
- Contains SKILL command whitelist (only dbCreatePath, dbCreateRect, dbCreateVia, dbCreateLabel, techGetTechFile, techFindViaDefByName, dbSave, dbClose).
- Specifies compute_geometry() contract: 3-decimal precision, 0.005 grid quantization, all geometry computed in Python and rendered as flat SKILL.

**04_Array_Generation.md**
- Defines rules for CDAC array generation using mosaic method with mandatory merge-first strategy.
- Critical workflow: merge adjacent positions into continuous regions FIRST, then generate dbCreateParamSimpleMosaic commands.
- Includes pitch calculation formula (pitch_x = unit_width - frame_vertical_width), routing/pin generation requirements, dummy isolation rules.

---

### Shape-Specific Modules (03_Shape_Specifics/)

#### Index & Guides

**INDEX.md**
- Index of available capacitor shapes with directory structure and purpose.
- Lists H_Shape, I_Type, Sandwich (Standard and Simplified_H_Notch variants).
- Provides guidance on which structure and dummy generation modules to load for each shape.

**SHAPE_SELECTION_GUIDE.md**
- Guide for selecting appropriate capacitor shape based on design requirements.
- Compares characteristics of different shapes (H-shape, I-type, Sandwich) including area efficiency, capacitance density, complexity.
- Provides decision matrix for shape selection based on target capacitance, area constraints, and technology node.

---

#### H-Shape

**H_Shape/03_01_H_Shape_Structure.md**
- Defines H-shape capacitor geometry: multiple vertical fingers + middle horizontal bar enclosed by outer rectangular frame.
- Specifies coordinate system, total dimensions formulas (height, width, halfHeight, halfWidth), outer frame boundaries.
- Critical BOT terminal via stack requirement: complete via stack at (0,0) connecting ALL metal layers in technology for array routing flexibility.

**H_Shape/03_02_H_Shape_Dummy_Generation.md**
- Rules for generating dummy capacitor from unit capacitor for H-shape.
- Dummy modifications: remove middle horizontal bar, shorten outer frame by delta_x (default 0.2 µm or 4× min spacing).
- Maintains frame structure for density matching while eliminating capacitance contribution.

---

#### I-Type

**I_Type/03_01_I_Type_Structure.md**
- Defines I-type capacitor geometry: alternating finger heights (tall/short pattern) with NO middle horizontal bar.
- Tall fingers extend full h_height, short fingers extend only (h_height - notch_height).
- Simpler structure than H-shape, suitable for certain capacitance requirements and layout constraints.

**I_Type/03_02_I_Type_Dummy_Generation.md**
- Rules for generating dummy capacitor from I-type unit capacitor.
- Dummy modifications: shorten outer frame by delta_x while maintaining alternating finger pattern.
- No middle bar to remove (unlike H-shape) since I-type inherently lacks middle bar.

---

#### Sandwich

**Sandwich/Standard/03_01_Sandwich_Standard_Structure.md**
- Defines 5-layer sandwich capacitor structure: L_top, L_top2, L_mid, L_bot2, L_bot.
- Uses multiple metal layers stacked vertically to increase capacitance density.
- Suitable for high-capacitance requirements where vertical stacking is more efficient than lateral expansion.

**Sandwich/Simplified_H_Notch/03_02_Sandwich_Simplified_H_Notch.md**
- Defines 3-layer simplified sandwich structure with H-core and vertical-frame notch design.
- Layers: L_top (full frame + notched vertical bars), L_mid (H-core), L_bot (full frame + notched vertical bars).
- Reduced layer count compared to standard sandwich, simpler manufacturing while maintaining good capacitance density.

**Sandwich/Simplified_H_Notch/03_03_Sandwich_Simplified_H_Notch_Dummy_Generation.md**
- Rules for generating dummy capacitor for simplified H-notch sandwich structure.
- Dummy modifications: adjust notch dimensions and frame geometry to eliminate capacitance while maintaining density.
- Layer-specific modifications for L_top, L_mid, L_bot to ensure proper dummy behavior.

---

### Technology Configurations (Technology_Configs/)

**INDEX.md**
- Index of available technology node configurations (28nm, 180nm).
- Explains purpose of technology configs: provide process-specific DRC rules, via parameters, metal layer restrictions.
- Guides users on which technology config to load based on target fabrication process.

**INTERFACE_SPEC.md**
- Defines standard interface contract for technology configuration files.
- Ensures shape-specific modules are decoupled from technology details by standardizing required parameters.
- Specifies mandatory fields: DRC rules (min spacing, width, area), via parameters (pitch, margin), metal layer lists.

**28nm_Technology.md**
- 28nm process parameters: minimum spacing ≥0.05 µm, frame-to-finger spacing ≥0.08 µm, critical spacing ≥0.1 µm.
- Via parameters: pitch_cut ≈0.13 µm, via margin ≈0.02 µm, width quantization formula (0.11 + 0.13×n).
- Metal layers M1-M7 available, finger_vertical_width default 0.05 µm, minimum area rules (≥0.017 µm²).

**180nm_Technology.md**
- 180nm process parameters: more relaxed DRC rules compared to 28nm due to larger feature sizes.
- Via parameters and metal layer specifications for 180nm fabrication process.
- Technology-specific constraints for capacitor design including minimum dimensions and layer restrictions.

---

## KB_IO_Ring - IO Pad Ring Generation

**structured.md**
- Complete instructions for IO ring generation: JSON configuration file creation, device type selection, voltage domain handling.
- Critical rules: corner device selection (PCORNER_G for digital, PCORNERA_G for analog), device suffix rules (V for top/bottom, H for left/right).
- Six-step workflow: requirement analysis → JSON validation → schematic/layout SKILL generation → SKILL execution with screenshots → DRC → LVS.
- Signal type mapping examples: analog IO (PDB3AC_H_G/V_G), analog power (PVDD1AC or PVDD3AC for voltage domain), analog ground (PVSS1AC or PVSS3AC).
- Available tools: validate_io_ring_config, generate_io_ring_schematic, generate_io_ring_layout, run_il_with_screenshot, run_drc, run_lvs.

---

## KB_System - System-Level Knowledge

**system_prompt.md**
- Main AI system prompt defining communication rules and error handling policies.
- Critical mandate: minimize user interruption, auto-infer non-blocking information, only ask for truly blocking requirements.
- Mandatory error knowledge base usage: read common_errors/ at startup, document new errors when encountered with context/cause/solution/prevention.

---

### Common Errors (common_errors/)

**README.md**
- Guidelines for error documentation: file naming conventions, required content structure.
- Each error document should include: description, context, root cause, solution, prevention strategies.
- Purpose: enable agent to learn from past errors and avoid repeating mistakes across sessions.

**import_json_error.md**
- Documents JSON import errors encountered during configuration loading.
- Root cause: JSON parsing failures, incorrect file paths, malformed JSON structure.
- Solutions: validate JSON syntax, check file encoding, verify path correctness.

**20251118_213858_array_cellview_creation_error.md**
- Array cellview creation error encountered on 2025-11-18 at 21:38:58.
- Context: failure during Phase 3 when creating CDAC array cellview in Virtuoso.
- Root cause analysis, solution applied, and prevention steps to avoid recurrence.

**20251118_214926_cdac_array_skill_execution_error.md**
- CDAC array SKILL script execution error encountered on 2025-11-18 at 21:49:26.
- Context: SKILL script generated but failed during execution in Virtuoso.
- Detailed error analysis with corrected SKILL code examples and execution guidelines.

---

## KB_Skill - SKILL Programming Reference

**skill_knowledge.md**
- SKILL programming basics: syntax, variables, comments, data types (numbers, strings, lists).
- Essential commands for Virtuoso automation: geometry creation (dbCreatePath, dbCreateRect, dbCreateVia), cellview operations.
- Code examples showing proper SKILL syntax for layout generation tasks.

---

## Summary Statistics

| Category | Files | Purpose |
|----------|-------|---------|
| **KB_CDAC** | 18 | Capacitor/CDAC design automation with modular knowledge for different shapes and technologies |
| **KB_IO_Ring** | 1 | IO pad ring generation with JSON-based configuration and automated schematic/layout generation |
| **KB_System** | 5 | System-level prompts, communication rules, and error documentation for learning and improvement |
| **KB_Skill** | 1 | SKILL programming language reference for Virtuoso automation scripting |
| **Total** | **25 files** | Complete knowledge base for IC design automation |

---

## Quick Reference by Task

### For IO Ring Design
1. Read `KB_IO_Ring/structured.md`
2. Generate JSON configuration based on requirements
3. Use IO ring tools (validate, generate schematic/layout, run verification)

### For CDAC/Capacitor Design (Example: H-Shape on 28nm)
1. Load `KB_CDAC/KB_INDEX.md` to understand structure
2. Load universal modules: `00_Core_Principles.md`, `01_Workflow_Framework.md`, `02_Python_SKILL_Integration.md`
3. Load shape module: `03_Shape_Specifics/H_Shape/03_01_H_Shape_Structure.md`
4. Load technology: `Technology_Configs/28nm_Technology.md`
5. For Phase 2: Load `03_Shape_Specifics/H_Shape/03_02_H_Shape_Dummy_Generation.md`
6. For Phase 3: Load `04_Array_Generation.md`

### For SKILL Programming
1. Consult `KB_Skill/skill_knowledge.md` for basic syntax
2. Follow SKILL flattening rules from `KB_CDAC/02_Python_SKILL_Integration.md`
3. Use only whitelisted commands, no loops/conditionals/functions

### For Error Resolution
1. Read `KB_System/common_errors/README.md` for documentation guidelines
2. Search `KB_System/common_errors/` for similar past errors
3. Document new errors with context, cause, solution, prevention

---

*Generated: 2025-11-22*
*Total Files Indexed: 25*
