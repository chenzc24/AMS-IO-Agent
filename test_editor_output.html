
    <style>
        .io-editor-body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; display: flex; height: 600px; margin: 0; background: #fff; border: 1px solid #ccc; color: #333; position: relative; }
        .io-sidebar { width: 300px; background: #f8f9fa; border-right: 1px solid #ddd; display: flex; flex-direction: column; padding: 10px; overflow-y: auto; color: #333; }
        .io-main-area { flex: 1; display: flex; flex-direction: column; overflow: hidden; background: #fff; }
        .io-canvas-container { flex: 1; background: #eeeeee; position: relative; overflow: auto; display: flex; justify-content: center; align-items: center; }
        .io-properties-panel { height: 200px; background: #f8f9fa; border-top: 1px solid #ddd; padding: 10px; display: none; color: #333; }
        
        # IO Pad Styles
        .io-pad {
            position: absolute;
            background: #4caf50;
            border: 1px solid #2e7d32;
            color: #ffffff;
            font-size: 10px;
            display: flex;
            justify-content: center;
            align-items: center;
            cursor: pointer;
            box-sizing: border-box;
            user-select: none;
            -webkit-user-select: none; /* safari fallback */
            text-align: center;
            word-wrap: break-word;
            padding: 2px;
            overflow: hidden; /* Ensure text doesn't spill out */
        }
        .io-pad:hover { box-shadow: 0 0 5px rgba(0,0,0,0.5); z-index: 10; transform: scale(1.02); }
        .io-pad.selected { border: 2px solid #ffeb3b; box-shadow: 0 0 8px #ffeb3b; z-index: 20; }
        .io-pad.dragging { opacity: 0.8; z-index: 100; cursor: grabbing; }
        
        .corner-pad { background: #FF6B6B; border-color: #c62828; color: #000; }
        .digital-pad { background: #32CD32; border-color: #228B22; color: #000; }
        .analog-pad { background: #4A90E2; border-color: #3A80D2; color: #000; }

        .palette-item {
            padding: 8px;
            margin: 5px;
            border: 1px solid #ccc;
            background: #eee;
            cursor: grab;
            font-size: 12px;
            color: #333;
        }

        #io-json-output { width: 95%; height: 150px; font-family: monospace; font-size: 11px; margin: 5px; background: #fff; color: #333; border: 1px solid #ccc; }
        .io-controls { padding: 10px; border-bottom: 1px solid #eee; }
        .io-btn { cursor: pointer; padding: 5px 10px; background: #007bff; color: white; border: none; border-radius: 3px; margin-bottom: 5px; width: 100%; }
        .io-btn:hover { background: #0056b3; }
        .io-sidebar label { display: block; margin-top: 5px; font-size: 12px; }
        .io-sidebar input[type="text"] { width: 100%; box-sizing: border-box; }
    </style>

    <div class="io-editor-body">
        <div class="io-sidebar">
            <h3>Component Palette</h3>
            <div class="palette-item" draggable="true" ondragstart="window.ioEditor.startAdd(event, 'PVDD1ANA', 'analog')">Analog VDD (Pad)</div>
            <div class="palette-item" draggable="true" ondragstart="window.ioEditor.startAdd(event, 'PVSS1ANA', 'analog')">Analog VSS (Pad)</div>
            <div class="palette-item" draggable="true" ondragstart="window.ioEditor.startAdd(event, 'PDDW0412SCDG', 'digital')">Digital IO (Pad)</div>
            <div class="palette-item" draggable="true" ondragstart="window.ioEditor.startAdd(event, 'PCORNER', 'null')">Corner Cell</div>

            <div class="io-controls">
                <button class="io-btn" onclick="window.ioEditor.pushToPython()">Sync to Agent</button>
                <button class="io-btn" onclick="window.ioEditor.autoArrange()">Auto-Fix Layout</button>
            </div>
            <h4>Properties</h4>
            <div id="io-props" style="font-size: 12px;">Select an item...</div>
        </div>

        <div class="io-main-area">
            <div class="io-canvas-container" id="io-canvas-container">
                <div id="io-chip-canvas" style="position: relative; background: #fff; box-shadow: 0 0 20px rgba(0,0,0,0.1);">
                    <!-- Pads will be rendered here -->
                </div>
            </div>
            <div class="io-properties-panel" id="io-bottom-panel">
                <h4>Raw JSON</h4>
                <textarea id="io-json-output" aria-label="IO ring layout JSON output" placeholder="Synced layout JSON"></textarea>
            </div>
        </div>
    </div>
    
    	<script>
        // Ensure a stub exists to avoid inline handler errors before full init
        window.ioEditor = window.ioEditor || {};
        window.ioEditor.startAdd = window.ioEditor.startAdd || function(e){ console.warn("ioEditor not ready yet"); };
        console.log("[IOEditor] script tag executing");

        // Check if ioEditor is already defined (Gradio re-render safety)
        if (!window.ioEditor.__initialized) {
            window.ioEditor = {
                __initialized: true,
                config: {}, 
                instances: [],
                scale: 0.5,
                
                chipW: 0, chipH: 0, padW: 80, padH: 120, cornerS: 130,

                selectedId: null,
                dragSrc: null,

                init: function(data) {
                    try {
                        const injectedData = data;
                        if (injectedData) {
                            this.loadData(injectedData);
                        } else {
                             this.loadData({
                                "ring_config": {
                                    "process_node": "T180", "chip_width": 1000, "chip_height": 1000,
                                    "pad_spacing": 90, "pad_width": 80, "pad_height": 120, "corner_size": 130
                                },
                                "instances": [
                                     { "name": "DEMO_PAD", "device": "PVDD1ANA", "position": "top_0", "type": "pad", "domain": "analog" }
                                ]
                            });
                        }
                        console.log("[IOEditor] init completed with", this.instances.length, "instances");
                    } catch(err) {
                        console.error("[IOEditor] init error", err);
                    }
                },

                loadData: function(rawData) {
                    this.config = rawData && rawData.ring_config ? rawData.ring_config : {};
                    this.instances = (rawData && rawData.instances) ? rawData.instances : [];
                    
                    // Force numeric types to prevent string concatenation during layout math
                    this.chipW = parseFloat(this.config.chip_width) || 1000;
                    this.chipH = parseFloat(this.config.chip_height) || 1000;
                    this.padW = parseFloat(this.config.pad_width) || 80;
                    this.padH = parseFloat(this.config.pad_height) || 120;
                    this.cornerS = parseFloat(this.config.corner_size) || 130;
                    this.padSpacing = parseFloat(this.config.pad_spacing) || 90;

                    // Auto-scale to fit view (approx 800x600 visible)
                    const sX = 800 / this.chipW;
                    const sY = 600 / this.chipH;
                    this.scale = Math.min(sX, sY, 0.8); 
                    if (this.scale < 0.1) this.scale = 0.1;

                    this.render();
                },

                calculateGeometry: function() {
                    // Full Port of Python _calculate_instance_geometry logic to JS
                    // Ensures that when we add/move items, the UI updates correctly without server roundstop
                    const chipW = parseFloat(this.chipW) || 1000;
                    const chipH = parseFloat(this.chipH) || 1000;
                    const padW = parseFloat(this.padW) || 80;
                    const padH = parseFloat(this.padH) || 120;
                    const cornerS = parseFloat(this.cornerS) || 130;
                    const spacing = parseFloat(this.padSpacing) || 90;
                    const order = this.config.placement_order || 'clockwise';

                    this.instances.forEach((inst) => {
                         const posStr = inst.position || "top_0";
                         const instType = inst.type || "pad";
                         
                         const parts = posStr.split('_');
                         const side = parts[0];
                         
                         let x=0, y=0, w=padW, h=padH, rot="R0";

                         // Corner Geometry
                         if (instType === "corner" || posStr.includes("corner")) {
                            w = cornerS; h = cornerS;
                            let isL = posStr.includes("left");
                            let isR = posStr.includes("right");
                            let isT = posStr.includes("top");
                            let isB = posStr.includes("bottom");

                            if (isT && isL) { x=0; y=0; rot="R270"; }
                            else if (isT && isR) { x=chipW-cornerS; y=0; rot="R180"; }
                            else if (isB && isL) { x=0; y=chipH-cornerS; rot="R0"; }
                            else if (isB && isR) { x=chipW-cornerS; y=chipH-cornerS; rot="R90"; }
                        } else {
                            // Pad Geometry
                            let idx = 0;
                            if (parts.length > 1) idx = parseInt(parts[1]) || 0;
                            
                            if (order === "counterclockwise") {
                                if (side === "left") {
                                    w=padH; h=padW; rot="R270";
                                    x=0; y=cornerS + (idx*spacing);
                                } else if (side === "bottom") {
                                    w=padW; h=padH; rot="R0";
                                    y=chipH-padH; x=cornerS + (idx*spacing);
                                } else if (side === "right") {
                                    w=padH; h=padW; rot="R90";
                                    x=chipW-padH; y=(chipH-cornerS-padW)-(idx*spacing);
                                } else if (side === "top") {
                                    w=padW; h=padH; rot="R180";
                                    y=0; x=(chipW-cornerS-padW)-(idx*spacing);
                                }
                            } else {
                                // Clockwise
                                if (side === "top") {
                                    w=padW; h=padH; rot="R180";
                                    y=0; x=cornerS + (idx*spacing);
                                } else if (side === "right") {
                                    w=padH; h=padW; rot="R90";
                                    x=chipW-padH; y=cornerS + (idx*spacing);
                                } else if (side === "bottom") {
                                    w=padW; h=padH; rot="R0";
                                    y=chipH-padH; x=(chipW-cornerS-padW)-(idx*spacing);
                                } else if (side === "left") {
                                    w=padH; h=padW; rot="R270";
                                    x=0; y=(chipH-cornerS-padW)-(idx*spacing);
                                }
                            }
                        }
                        
                        inst.ui_x = x;
                        inst.ui_y = y;
                        inst.ui_w = w;
                        inst.ui_h = h;
                        inst.ui_rot = rot;
                    });
                },

                render: function() {
                    const canvas = document.getElementById('io-chip-canvas');
                    if (!canvas) {
                        console.warn("[IOEditor] canvas not found yet");
                        return;
                    }

                    // Recalculate Geometry ON EVERY RENDER to ensure updates works
                    this.calculateGeometry();
                    
                    canvas.innerHTML = '';
                    canvas.style.width = (this.chipW * this.scale) + 'px';
                    canvas.style.height = (this.chipH * this.scale) + 'px';


                    // Draw Core Area (Reference)
                    const core = document.createElement('div');
                    core.style.position = 'absolute';
                    core.style.left = (this.padH * this.scale) + 'px';
                    core.style.top = (this.padH * this.scale) + 'px';
                    core.style.width = ((this.chipW - 2 * this.padH) * this.scale) + 'px';
                    core.style.height = ((this.chipH - 2 * this.padH) * this.scale) + 'px';
                    core.style.border = '1px dashed #ccc';
                    core.innerText = "CORE";
                    core.style.textAlign = 'center';
                    core.style.paddingTop = '20%';
                    core.style.color = '#ccc';
                    canvas.appendChild(core);

                    this.instances.forEach((inst, idx) => {
                        const el = document.createElement('div');
                        el.className = 'io-pad';
                        
                        if (inst.type === 'corner') el.classList.add('corner-pad');
                        else if (inst.domain === 'digital') el.classList.add('digital-pad');
                        else el.classList.add('analog-pad');
                        
                        if (idx === this.selectedId) el.classList.add('selected');

                        // Use Python-calculated coordinates if available, otherwise fallback (or 0)
                        // This fixes the layout issues by trusting Python backend logic
                        let x, y, w, h, rotation;
                        
                        if (inst.ui_x !== undefined) {
                            x = inst.ui_x;
                            y = inst.ui_y;
                            w = inst.ui_w;
                            h = inst.ui_h;
                            rotation = inst.ui_rot;
                        } else {
                            // Backup JS Logic if Python inject fails
                            console.warn("Using JS Fallback for", inst.name);
                            const pStr = inst.position || "top_0";
                            const parts = pStr.split('_');
                            const side = parts[0];
                            const idx = parseInt(parts[1]) || 0;
                            const spacing = this.padSpacing;
                            
                            w = (side==='left'||side==='right')? this.padH : this.padW;
                            h = (side==='left'||side==='right')? this.padW : this.padH;
                            
                            if (inst.type === 'corner') { w=this.cornerS; h=this.cornerS; }
                            
                            // Simple Fallback Placement
                            if(side==='top'){ x = this.cornerS + idx*spacing; y = 0; rotation="R180"; }
                            else if(side==='bottom'){ x = this.chipW - this.cornerS - this.padW - idx*spacing; y = this.chipH-this.padH; rotation="R0"; }
                            else if(side==='left'){ x = 0; y = this.chipH - this.cornerS - this.padW - idx*spacing; rotation="R270"; }
                            else if(side==='right'){ x = this.chipW-this.padH; y=this.cornerS + idx*spacing; rotation="R90"; }
                            else { x=0; y=0; rotation="R0"; }
                        }

                        // Inject calculated rotation back into instance for property view
                        inst.rotation = rotation;

                        const scaledW = w * this.scale;
                        const scaledH = h * this.scale;

                        el.style.width = scaledW + 'px';
                        el.style.height = scaledH + 'px';
                        el.style.left = (x * this.scale) + 'px';
                        el.style.top = (y * this.scale) + 'px';
                        el.style.position = 'absolute'; // Reinforce absolute positioning
                        
                        // Text Rotation Logic
                        // We want the text to look like the device is rotated.
                        let textRot = 0;
                        if (rotation === 'R90') textRot = 90;
                        else if (rotation === 'R180') textRot = 180;
                        else if (rotation === 'R270') textRot = 270;
                        
                        // Font scaling based on pad size
                        const minDim = Math.min(scaledW, scaledH);
                        const fontSize = Math.max(6, Math.min(10, minDim / 5));

                        el.style.fontSize = fontSize + 'px';

                        el.innerHTML = `<div style="transform: rotate(${textRot}deg); width: 100%; height: 100%; display: flex; flex-direction: column; justify-content: center; align-items: center; line-height: 1.1;"><strong>${inst.name || inst.device}</strong><span style="font-size:0.8em; opacity:0.8">${rotation}</span></div>`;
                        
                        el.title = `${inst.name} (${inst.device})\nPos: ${inst.position}\nRot: ${rotation}`;

                        el.draggable = true;
                        el.onclick = (e) => this.selectItem(idx, e);
                        el.ondragstart = (e) => this.handleDragStart(e, idx);
                        el.ondragover = (e) => e.preventDefault();
                        el.ondrop = (e) => this.handleDrop(e, idx);

                        canvas.appendChild(el);
                    });
                },

                selectItem: function(idx, e) {
                    e.stopPropagation();
                    this.selectedId = idx;
                    this.render();
                    this.showProps(this.instances[idx]);
                },

                showProps: function(item) {
                    const container = document.getElementById('io-props');
                    if (!container) return;
                    
                    container.innerHTML = `
                        <label>Name: <input type="text" value="${item.name}" onchange="window.ioEditor.updateProp('name', this.value)"></label>
                        <label>Device: <input type="text" value="${item.device}" onchange="window.ioEditor.updateProp('device', this.value)"></label>
                        <label>Position: <span>${item.position}</span></label>
                        <label>Rotation: <span>${item.rotation || "calc"}</span></label>
                    `;
                },

                updateProp: function(key, value) {
                    if (this.selectedId !== null) {
                        this.instances[this.selectedId][key] = value;
                        this.render();
                        this.pushToPython(); 
                    }
                },

                handleDragStart: function(e, idx) {
                    e.dataTransfer.effectAllowed = 'move';
                    e.dataTransfer.setData('text/plain', JSON.stringify({type: 'swap', index: idx}));
                    this.dragSrc = idx;
                },

                startAdd: function(e, device, domain) {
                    e.dataTransfer.effectAllowed = 'copy';
                    e.dataTransfer.setData('text/plain', JSON.stringify({type: 'add', device: device, domain: domain}));
                    this.dragSrc = null;
                },

                handleDrop: function(e, targetIdx) {
                    e.stopPropagation();
                    e.preventDefault();
                    const dataStr = e.dataTransfer.getData('text/plain');
                    if (!dataStr) return;
                    
                    const data = JSON.parse(dataStr);
                    const targetItem = this.instances[targetIdx];
                    
                    if (targetItem.type === 'corner') return; 

                    if (data.type === 'swap') {
                        const srcIdx = data.index;
                        const temp = this.instances[srcIdx];
                        const posA = this.instances[srcIdx].position;
                        const posB = this.instances[targetIdx].position;
                        this.instances[srcIdx].position = posB;
                        this.instances[targetIdx].position = posA;
                        this.instances[srcIdx] = this.instances[targetIdx];
                        this.instances[targetIdx] = temp;
                    } else if (data.type === 'add') {
                        const newItem = {
                            name: "NEW_IO",
                            device: data.device,
                            domain: data.domain,
                            view_name: "layout",
                            type: "pad",
                            position: targetItem.position
                        };
                        this.instances.splice(targetIdx + 1, 0, newItem);
                        this.autoArrange();
                    }
                    
                    this.autoArrange();
                    this.render();
                    this.pushToPython();
                },

                autoArrange: function() {
                    const sides = { top: [], bottom: [], left: [], right: [] };
                    
                    this.instances.forEach(item => {
                        if (item.type !== 'corner') {
                            const side = (item.position || "top_0").split('_')[0];
                            if (sides[side]) sides[side].push(item);
                            else sides.top.push(item);
                        }
                    });
                    
                    Object.keys(sides).forEach(side => {
                        sides[side].forEach((item, idx) => {
                            item.position = `${side}_${idx}`;
                        });
                    });
                    this.render();
                },

                pushToPython: function() {
                    const data = {
                        ring_config: this.config,
                        instances: this.instances
                    };
                    const jsonStr = JSON.stringify(data, null, 2);
                    
                    const bridge = document.querySelector('.io-ring-bridge textarea') || document.querySelector('.io-ring-bridge input');
                    if (bridge) {
                        bridge.value = jsonStr;
                        bridge.dispatchEvent(new Event('input', { bubbles: true }));
                    } else {
                        console.warn("[IOEditor] bridge textarea/input not found");
                    }
                    
                    const debugBox = document.getElementById('io-json-output');
                    if(debugBox) debugBox.value = jsonStr;
                }
            };
        }

        // Initialize with Safety Check
        (function() {
            const maxRetries = 20;
            let attempts = 0;
            
            function tryInit() {
                const canvas = document.getElementById('io-chip-canvas');
                if (canvas) {
                    try {
                        const data = {"ring_config": {"process_node": "T180", "chip_width": 1350, "chip_height": 1350, "pad_spacing": 90, "pad_width": 80, "pad_height": 120, "corner_size": 130, "top_count": 12, "bottom_count": 12, "left_count": 12, "right_count": 12, "placement_order": "counterclockwise"}, "instances": [{"name": "MCLK", "device": "PVDD1ANA", "view_name": "layout", "domain": "analog", "pad_width": 80, "pad_height": 120, "position": "left_0", "type": "pad", "pin_config": {"VDD": {"label": "VIOLA"}, "VSS": {"label": "GIOLA"}, "VDDPST": {"label": "VIOHA"}, "VSSPST": {"label": "GIOHA"}, "AVDD": {"label": "MCLK"}}, "ui_x": 0, "ui_y": 130.0, "ui_w": 120.0, "ui_h": 80.0, "ui_rot": "R270"}, {"name": "CDCKB", "device": "PVDD1ANA", "view_name": "layout", "domain": "analog", "pad_width": 80, "pad_height": 120, "position": "left_1", "type": "pad", "pin_config": {"VDD": {"label": "VIOLA"}, "VSS": {"label": "GIOLA"}, "VDDPST": {"label": "VIOHA"}, "VSSPST": {"label": "GIOHA"}, "AVDD": {"label": "CDCKB"}}, "ui_x": 0, "ui_y": 220.0, "ui_w": 120.0, "ui_h": 80.0, "ui_rot": "R270"}, {"name": "VDCK", "device": "PVDD1ANA", "view_name": "layout", "domain": "analog", "pad_width": 80, "pad_height": 120, "position": "left_2", "type": "pad", "pin_config": {"VDD": {"label": "VIOLA"}, "VSS": {"label": "GIOLA"}, "VDDPST": {"label": "VIOHA"}, "VSSPST": {"label": "GIOHA"}, "AVDD": {"label": "VDCK"}}, "ui_x": 0, "ui_y": 310.0, "ui_w": 120.0, "ui_h": 80.0, "ui_rot": "R270"}, {"name": "GDCK", "device": "PVSS1ANA", "view_name": "layout", "domain": "analog", "pad_width": 80, "pad_height": 120, "position": "left_3", "type": "pad", "pin_config": {"VDD": {"label": "VIOLA"}, "VSS": {"label": "GIOLA"}, "VDDPST": {"label": "VIOHA"}, "VSSPST": {"label": "GIOHA"}, "AVSS": {"label": "GDCK"}}, "ui_x": 0, "ui_y": 400.0, "ui_w": 120.0, "ui_h": 80.0, "ui_rot": "R270"}, {"name": "VPID", "device": "PVDD1ANA", "view_name": "layout", "domain": "analog", "pad_width": 80, "pad_height": 120, "position": "left_4", "type": "pad", "pin_config": {"VDD": {"label": "VIOLA"}, "VSS": {"label": "GIOLA"}, "VDDPST": {"label": "VIOHA"}, "VSSPST": {"label": "GIOHA"}, "AVDD": {"label": "VPID"}}, "ui_x": 0, "ui_y": 490.0, "ui_w": 120.0, "ui_h": 80.0, "ui_rot": "R270"}, {"name": "VNID", "device": "PVDD1ANA", "view_name": "layout", "domain": "analog", "pad_width": 80, "pad_height": 120, "position": "left_5", "type": "pad", "pin_config": {"VDD": {"label": "VIOLA"}, "VSS": {"label": "GIOLA"}, "VDDPST": {"label": "VIOHA"}, "VSSPST": {"label": "GIOHA"}, "AVDD": {"label": "VNID"}}, "ui_x": 0, "ui_y": 580.0, "ui_w": 120.0, "ui_h": 80.0, "ui_rot": "R270"}, {"name": "IPPI", "device": "PVDD1ANA", "view_name": "layout", "domain": "analog", "pad_width": 80, "pad_height": 120, "position": "left_6", "type": "pad", "pin_config": {"VDD": {"label": "VIOLA"}, "VSS": {"label": "GIOLA"}, "VDDPST": {"label": "VIOHA"}, "VSSPST": {"label": "GIOHA"}, "AVDD": {"label": "IPPI"}}, "ui_x": 0, "ui_y": 670.0, "ui_w": 120.0, "ui_h": 80.0, "ui_rot": "R270"}, {"name": "IPNI", "device": "PVDD1ANA", "view_name": "layout", "domain": "analog", "pad_width": 80, "pad_height": 120, "position": "left_7", "type": "pad", "pin_config": {"VDD": {"label": "VIOLA"}, "VSS": {"label": "GIOLA"}, "VDDPST": {"label": "VIOHA"}, "VSSPST": {"label": "GIOHA"}, "AVDD": {"label": "IPNI"}}, "ui_x": 0, "ui_y": 760.0, "ui_w": 120.0, "ui_h": 80.0, "ui_rot": "R270"}, {"name": "VNSC", "device": "PVDD1ANA", "view_name": "layout", "domain": "analog", "pad_width": 80, "pad_height": 120, "position": "left_8", "type": "pad", "pin_config": {"VDD": {"label": "VIOLA"}, "VSS": {"label": "GIOLA"}, "VDDPST": {"label": "VIOHA"}, "VSSPST": {"label": "GIOHA"}, "AVDD": {"label": "VNSC"}}, "ui_x": 0, "ui_y": 850.0, "ui_w": 120.0, "ui_h": 80.0, "ui_rot": "R270"}, {"name": "AVSF", "device": "PVDD1ANA", "view_name": "layout", "domain": "analog", "pad_width": 80, "pad_height": 120, "position": "left_9", "type": "pad", "pin_config": {"VDD": {"label": "VIOLA"}, "VSS": {"label": "GIOLA"}, "VDDPST": {"label": "VIOHA"}, "VSSPST": {"label": "GIOHA"}, "AVDD": {"label": "AVSF"}}, "ui_x": 0, "ui_y": 940.0, "ui_w": 120.0, "ui_h": 80.0, "ui_rot": "R270"}, {"name": "AGSF", "device": "PVSS1ANA", "view_name": "layout", "domain": "analog", "pad_width": 80, "pad_height": 120, "position": "left_10", "type": "pad", "pin_config": {"VDD": {"label": "VIOLA"}, "VSS": {"label": "GIOLA"}, "VDDPST": {"label": "VIOHA"}, "VSSPST": {"label": "GIOHA"}, "AVSS": {"label": "AGSF"}}, "ui_x": 0, "ui_y": 1030.0, "ui_w": 120.0, "ui_h": 80.0, "ui_rot": "R270"}, {"name": "CKAZ", "device": "PDDW0412SCDG", "view_name": "layout", "domain": "digital", "pad_width": 80, "pad_height": 120, "position": "left_11", "type": "pad", "io_type": "input", "pin_config": {"VDD": {"label": "VIOLD"}, "VSS": {"label": "GIOLD"}, "VDDPST": {"label": "VIOHD"}, "VSSPST": {"label": "GIOHD"}}, "ui_x": 0, "ui_y": 1120.0, "ui_w": 120.0, "ui_h": 80.0, "ui_rot": "R270"}, {"name": "CKTM", "device": "PDDW0412SCDG", "view_name": "layout", "domain": "digital", "pad_width": 80, "pad_height": 120, "position": "bottom_0", "type": "pad", "io_type": "input", "pin_config": {"VDD": {"label": "VIOLD"}, "VSS": {"label": "GIOLD"}, "VDDPST": {"label": "VIOHD"}, "VSSPST": {"label": "GIOHD"}}, "ui_x": 130.0, "ui_y": 1230.0, "ui_w": 80.0, "ui_h": 120.0, "ui_rot": "R0"}, {"name": "CONV", "device": "PDDW0412SCDG", "view_name": "layout", "domain": "digital", "pad_width": 80, "pad_height": 120, "position": "bottom_1", "type": "pad", "io_type": "input", "pin_config": {"VDD": {"label": "VIOLD"}, "VSS": {"label": "GIOLD"}, "VDDPST": {"label": "VIOHD"}, "VSSPST": {"label": "GIOHD"}}, "ui_x": 220.0, "ui_y": 1230.0, "ui_w": 80.0, "ui_h": 120.0, "ui_rot": "R0"}, {"name": "RSTM", "device": "PDDW0412SCDG", "view_name": "layout", "domain": "digital", "pad_width": 80, "pad_height": 120, "position": "bottom_2", "type": "pad", "io_type": "input", "pin_config": {"VDD": {"label": "VIOLD"}, "VSS": {"label": "GIOLD"}, "VDDPST": {"label": "VIOHD"}, "VSSPST": {"label": "GIOHD"}}, "ui_x": 310.0, "ui_y": 1230.0, "ui_w": 80.0, "ui_h": 120.0, "ui_rot": "R0"}, {"name": "DOFG", "device": "PDDW0412SCDG", "view_name": "layout", "domain": "digital", "pad_width": 80, "pad_height": 120, "position": "bottom_3", "type": "pad", "io_type": "output", "pin_config": {"VDD": {"label": "VIOLD"}, "VSS": {"label": "GIOLD"}, "VDDPST": {"label": "VIOHD"}, "VSSPST": {"label": "GIOHD"}}, "ui_x": 400.0, "ui_y": 1230.0, "ui_w": 80.0, "ui_h": 120.0, "ui_rot": "R0"}, {"name": "CLKO", "device": "PDDW0412SCDG", "view_name": "layout", "domain": "digital", "pad_width": 80, "pad_height": 120, "position": "bottom_4", "type": "pad", "io_type": "input", "pin_config": {"VDD": {"label": "VIOLD"}, "VSS": {"label": "GIOLD"}, "VDDPST": {"label": "VIOHD"}, "VSSPST": {"label": "GIOHD"}}, "ui_x": 490.0, "ui_y": 1230.0, "ui_w": 80.0, "ui_h": 120.0, "ui_rot": "R0"}, {"name": "DOTM", "device": "PDDW0412SCDG", "view_name": "layout", "domain": "digital", "pad_width": 80, "pad_height": 120, "position": "bottom_5", "type": "pad", "io_type": "output", "pin_config": {"VDD": {"label": "VIOLD"}, "VSS": {"label": "GIOLD"}, "VDDPST": {"label": "VIOHD"}, "VSSPST": {"label": "GIOHD"}}, "ui_x": 580.0, "ui_y": 1230.0, "ui_w": 80.0, "ui_h": 120.0, "ui_rot": "R0"}, {"name": "GIOHD", "device": "PVSS2CDG", "view_name": "layout", "domain": "analog", "pad_width": 80, "pad_height": 120, "position": "bottom_6", "type": "pad", "pin_config": {"VDD": {"label": "VIOLA"}, "VSS": {"label": "GIOLA"}, "VDDPST": {"label": "VIOHA"}, "VSSPST": {"label": "GIOHD"}}, "ui_x": 670.0, "ui_y": 1230.0, "ui_w": 80.0, "ui_h": 120.0, "ui_rot": "R0"}, {"name": "DA14", "device": "PDDW0412SCDG", "view_name": "layout", "domain": "digital", "pad_width": 80, "pad_height": 120, "position": "bottom_7", "type": "pad", "io_type": "output", "pin_config": {"VDD": {"label": "VIOLD"}, "VSS": {"label": "GIOLD"}, "VDDPST": {"label": "VIOHD"}, "VSSPST": {"label": "GIOHD"}}, "ui_x": 760.0, "ui_y": 1230.0, "ui_w": 80.0, "ui_h": 120.0, "ui_rot": "R0"}, {"name": "DA13", "device": "PDDW0412SCDG", "view_name": "layout", "domain": "digital", "pad_width": 80, "pad_height": 120, "position": "bottom_8", "type": "pad", "io_type": "output", "pin_config": {"VDD": {"label": "VIOLD"}, "VSS": {"label": "GIOLD"}, "VDDPST": {"label": "VIOHD"}, "VSSPST": {"label": "GIOHD"}}, "ui_x": 850.0, "ui_y": 1230.0, "ui_w": 80.0, "ui_h": 120.0, "ui_rot": "R0"}, {"name": "DA12", "device": "PDDW0412SCDG", "view_name": "layout", "domain": "digital", "pad_width": 80, "pad_height": 120, "position": "bottom_9", "type": "pad", "io_type": "output", "pin_config": {"VDD": {"label": "VIOLD"}, "VSS": {"label": "GIOLD"}, "VDDPST": {"label": "VIOHD"}, "VSSPST": {"label": "GIOHD"}}, "ui_x": 940.0, "ui_y": 1230.0, "ui_w": 80.0, "ui_h": 120.0, "ui_rot": "R0"}, {"name": "DA11", "device": "PDDW0412SCDG", "view_name": "layout", "domain": "digital", "pad_width": 80, "pad_height": 120, "position": "bottom_10", "type": "pad", "io_type": "output", "pin_config": {"VDD": {"label": "VIOLD"}, "VSS": {"label": "GIOLD"}, "VDDPST": {"label": "VIOHD"}, "VSSPST": {"label": "GIOHD"}}, "ui_x": 1030.0, "ui_y": 1230.0, "ui_w": 80.0, "ui_h": 120.0, "ui_rot": "R0"}, {"name": "DA10", "device": "PDDW0412SCDG", "view_name": "layout", "domain": "digital", "pad_width": 80, "pad_height": 120, "position": "bottom_11", "type": "pad", "io_type": "output", "pin_config": {"VDD": {"label": "VIOLD"}, "VSS": {"label": "GIOLD"}, "VDDPST": {"label": "VIOHD"}, "VSSPST": {"label": "GIOHD"}}, "ui_x": 1120.0, "ui_y": 1230.0, "ui_w": 80.0, "ui_h": 120.0, "ui_rot": "R0"}, {"name": "DA9", "device": "PDDW0412SCDG", "view_name": "layout", "domain": "digital", "pad_width": 80, "pad_height": 120, "position": "right_0", "type": "pad", "io_type": "output", "pin_config": {"VDD": {"label": "VIOLD"}, "VSS": {"label": "GIOLD"}, "VDDPST": {"label": "VIOHD"}, "VSSPST": {"label": "GIOHD"}}, "ui_x": 1230.0, "ui_y": 1140.0, "ui_w": 120.0, "ui_h": 80.0, "ui_rot": "R90"}, {"name": "DA8", "device": "PDDW0412SCDG", "view_name": "layout", "domain": "digital", "pad_width": 80, "pad_height": 120, "position": "right_1", "type": "pad", "io_type": "output", "pin_config": {"VDD": {"label": "VIOLD"}, "VSS": {"label": "GIOLD"}, "VDDPST": {"label": "VIOHD"}, "VSSPST": {"label": "GIOHD"}}, "ui_x": 1230.0, "ui_y": 1050.0, "ui_w": 120.0, "ui_h": 80.0, "ui_rot": "R90"}, {"name": "DA7", "device": "PDDW0412SCDG", "view_name": "layout", "domain": "digital", "pad_width": 80, "pad_height": 120, "position": "right_2", "type": "pad", "io_type": "output", "pin_config": {"VDD": {"label": "VIOLD"}, "VSS": {"label": "GIOLD"}, "VDDPST": {"label": "VIOHD"}, "VSSPST": {"label": "GIOHD"}}, "ui_x": 1230.0, "ui_y": 960.0, "ui_w": 120.0, "ui_h": 80.0, "ui_rot": "R90"}, {"name": "DA6", "device": "PDDW0412SCDG", "view_name": "layout", "domain": "digital", "pad_width": 80, "pad_height": 120, "position": "right_3", "type": "pad", "io_type": "output", "pin_config": {"VDD": {"label": "VIOLD"}, "VSS": {"label": "GIOLD"}, "VDDPST": {"label": "VIOHD"}, "VSSPST": {"label": "GIOHD"}}, "ui_x": 1230.0, "ui_y": 870.0, "ui_w": 120.0, "ui_h": 80.0, "ui_rot": "R90"}, {"name": "DA5", "device": "PDDW0412SCDG", "view_name": "layout", "domain": "digital", "pad_width": 80, "pad_height": 120, "position": "right_4", "type": "pad", "io_type": "output", "pin_config": {"VDD": {"label": "VIOLD"}, "VSS": {"label": "GIOLD"}, "VDDPST": {"label": "VIOHD"}, "VSSPST": {"label": "GIOHD"}}, "ui_x": 1230.0, "ui_y": 780.0, "ui_w": 120.0, "ui_h": 80.0, "ui_rot": "R90"}, {"name": "DA4", "device": "PDDW0412SCDG", "view_name": "layout", "domain": "digital", "pad_width": 80, "pad_height": 120, "position": "right_5", "type": "pad", "io_type": "output", "pin_config": {"VDD": {"label": "VIOLD"}, "VSS": {"label": "GIOLD"}, "VDDPST": {"label": "VIOHD"}, "VSSPST": {"label": "GIOHD"}}, "ui_x": 1230.0, "ui_y": 690.0, "ui_w": 120.0, "ui_h": 80.0, "ui_rot": "R90"}, {"name": "DA3", "device": "PDDW0412SCDG", "view_name": "layout", "domain": "digital", "pad_width": 80, "pad_height": 120, "position": "right_6", "type": "pad", "io_type": "output", "pin_config": {"VDD": {"label": "VIOLD"}, "VSS": {"label": "GIOLD"}, "VDDPST": {"label": "VIOHD"}, "VSSPST": {"label": "GIOHD"}}, "ui_x": 1230.0, "ui_y": 600.0, "ui_w": 120.0, "ui_h": 80.0, "ui_rot": "R90"}, {"name": "DA2", "device": "PDDW0412SCDG", "view_name": "layout", "domain": "digital", "pad_width": 80, "pad_height": 120, "position": "right_7", "type": "pad", "io_type": "output", "pin_config": {"VDD": {"label": "VIOLD"}, "VSS": {"label": "GIOLD"}, "VDDPST": {"label": "VIOHD"}, "VSSPST": {"label": "GIOHD"}}, "ui_x": 1230.0, "ui_y": 510.0, "ui_w": 120.0, "ui_h": 80.0, "ui_rot": "R90"}, {"name": "DA1", "device": "PDDW0412SCDG", "view_name": "layout", "domain": "digital", "pad_width": 80, "pad_height": 120, "position": "right_8", "type": "pad", "io_type": "output", "pin_config": {"VDD": {"label": "VIOLD"}, "VSS": {"label": "GIOLD"}, "VDDPST": {"label": "VIOHD"}, "VSSPST": {"label": "GIOHD"}}, "ui_x": 1230.0, "ui_y": 420.0, "ui_w": 120.0, "ui_h": 80.0, "ui_rot": "R90"}, {"name": "DA0", "device": "PDDW0412SCDG", "view_name": "layout", "domain": "digital", "pad_width": 80, "pad_height": 120, "position": "right_9", "type": "pad", "io_type": "output", "pin_config": {"VDD": {"label": "VIOLD"}, "VSS": {"label": "GIOLD"}, "VDDPST": {"label": "VIOHD"}, "VSSPST": {"label": "GIOHD"}}, "ui_x": 1230.0, "ui_y": 330.0, "ui_w": 120.0, "ui_h": 80.0, "ui_rot": "R90"}, {"name": "VIOHD", "device": "PVDD2CDG", "view_name": "layout", "domain": "analog", "pad_width": 80, "pad_height": 120, "position": "right_10", "type": "pad", "pin_config": {"VDD": {"label": "VIOLA"}, "VSS": {"label": "GIOLA"}, "VDDPST": {"label": "VIOHD"}, "VSSPST": {"label": "GIOHA"}}, "ui_x": 1230.0, "ui_y": 240.0, "ui_w": 120.0, "ui_h": 80.0, "ui_rot": "R90"}, {"name": "VIOLD", "device": "PVDD1CDG", "view_name": "layout", "domain": "analog", "pad_width": 80, "pad_height": 120, "position": "right_11", "type": "pad", "pin_config": {"VDD": {"label": "VIOLD"}, "VSS": {"label": "GIOLA"}, "VDDPST": {"label": "VIOHA"}, "VSSPST": {"label": "GIOHA"}}, "ui_x": 1230.0, "ui_y": 150.0, "ui_w": 120.0, "ui_h": 80.0, "ui_rot": "R90"}, {"name": "GIOLD", "device": "PVSS1CDG", "view_name": "layout", "domain": "analog", "pad_width": 80, "pad_height": 120, "position": "top_0", "type": "pad", "pin_config": {"VDD": {"label": "VIOLA"}, "VSS": {"label": "GIOLD"}, "VDDPST": {"label": "VIOHA"}, "VSSPST": {"label": "GIOHA"}}, "ui_x": 1140.0, "ui_y": 0, "ui_w": 80.0, "ui_h": 120.0, "ui_rot": "R180"}, {"name": "GIOHD", "device": "PVSS2CDG", "view_name": "layout", "domain": "analog", "pad_width": 80, "pad_height": 120, "position": "top_1", "type": "pad", "pin_config": {"VDD": {"label": "VIOLA"}, "VSS": {"label": "GIOLA"}, "VDDPST": {"label": "VIOHA"}, "VSSPST": {"label": "GIOHD"}}, "ui_x": 1050.0, "ui_y": 0, "ui_w": 80.0, "ui_h": 120.0, "ui_rot": "R180"}, {"name": "GIOHA", "device": "PVSS2CDG", "view_name": "layout", "domain": "analog", "pad_width": 80, "pad_height": 120, "position": "top_2", "type": "pad", "pin_config": {"VDD": {"label": "VIOLA"}, "VSS": {"label": "GIOLA"}, "VDDPST": {"label": "VIOHA"}, "VSSPST": {"label": "GIOHA"}}, "ui_x": 960.0, "ui_y": 0, "ui_w": 80.0, "ui_h": 120.0, "ui_rot": "R180"}, {"name": "AGSC", "device": "PVSS1ANA", "view_name": "layout", "domain": "analog", "pad_width": 80, "pad_height": 120, "position": "top_3", "type": "pad", "pin_config": {"VDD": {"label": "VIOLA"}, "VSS": {"label": "GIOLA"}, "VDDPST": {"label": "VIOHA"}, "VSSPST": {"label": "GIOHA"}, "AVSS": {"label": "AGSC"}}, "ui_x": 870.0, "ui_y": 0, "ui_w": 80.0, "ui_h": 120.0, "ui_rot": "R180"}, {"name": "AVSC", "device": "PVDD1ANA", "view_name": "layout", "domain": "analog", "pad_width": 80, "pad_height": 120, "position": "top_4", "type": "pad", "pin_config": {"VDD": {"label": "VIOLA"}, "VSS": {"label": "GIOLA"}, "VDDPST": {"label": "VIOHA"}, "VSSPST": {"label": "GIOHA"}, "AVDD": {"label": "AVSC"}}, "ui_x": 780.0, "ui_y": 0, "ui_w": 80.0, "ui_h": 120.0, "ui_rot": "R180"}, {"name": "DVSC", "device": "PVDD1ANA", "view_name": "layout", "domain": "analog", "pad_width": 80, "pad_height": 120, "position": "top_5", "type": "pad", "pin_config": {"VDD": {"label": "VIOLA"}, "VSS": {"label": "GIOLA"}, "VDDPST": {"label": "VIOHA"}, "VSSPST": {"label": "GIOHA"}, "AVDD": {"label": "DVSC"}}, "ui_x": 690.0, "ui_y": 0, "ui_w": 80.0, "ui_h": 120.0, "ui_rot": "R180"}, {"name": "DGSC", "device": "PVSS1ANA", "view_name": "layout", "domain": "analog", "pad_width": 80, "pad_height": 120, "position": "top_6", "type": "pad", "pin_config": {"VDD": {"label": "VIOLA"}, "VSS": {"label": "GIOLA"}, "VDDPST": {"label": "VIOHA"}, "VSSPST": {"label": "GIOHA"}, "AVSS": {"label": "DGSC"}}, "ui_x": 600.0, "ui_y": 0, "ui_w": 80.0, "ui_h": 120.0, "ui_rot": "R180"}, {"name": "VIOHA", "device": "PVDD2CDG", "view_name": "layout", "domain": "analog", "pad_width": 80, "pad_height": 120, "position": "top_7", "type": "pad", "pin_config": {"VDD": {"label": "VIOLA"}, "VSS": {"label": "GIOLA"}, "VDDPST": {"label": "VIOHA"}, "VSSPST": {"label": "GIOHA"}}, "ui_x": 510.0, "ui_y": 0, "ui_w": 80.0, "ui_h": 120.0, "ui_rot": "R180"}, {"name": "GIOHA", "device": "PVSS2CDG", "view_name": "layout", "domain": "analog", "pad_width": 80, "pad_height": 120, "position": "top_8", "type": "pad", "pin_config": {"VDD": {"label": "VIOLA"}, "VSS": {"label": "GIOLA"}, "VDDPST": {"label": "VIOHA"}, "VSSPST": {"label": "GIOHA"}}, "ui_x": 420.0, "ui_y": 0, "ui_w": 80.0, "ui_h": 120.0, "ui_rot": "R180"}, {"name": "GIOLA", "device": "PVSS1CDG", "view_name": "layout", "domain": "analog", "pad_width": 80, "pad_height": 120, "position": "top_9", "type": "pad", "pin_config": {"VDD": {"label": "VIOLA"}, "VSS": {"label": "GIOLA"}, "VDDPST": {"label": "VIOHA"}, "VSSPST": {"label": "GIOHA"}}, "ui_x": 330.0, "ui_y": 0, "ui_w": 80.0, "ui_h": 120.0, "ui_rot": "R180"}, {"name": "VIOLA", "device": "PVDD1CDG", "view_name": "layout", "domain": "analog", "pad_width": 80, "pad_height": 120, "position": "top_10", "type": "pad", "pin_config": {"VDD": {"label": "VIOLA"}, "VSS": {"label": "GIOLA"}, "VDDPST": {"label": "VIOHA"}, "VSSPST": {"label": "GIOHA"}}, "ui_x": 240.0, "ui_y": 0, "ui_w": 80.0, "ui_h": 120.0, "ui_rot": "R180"}, {"name": "VDCKB", "device": "PVDD1ANA", "view_name": "layout", "domain": "analog", "pad_width": 80, "pad_height": 120, "position": "top_11", "type": "pad", "pin_config": {"VDD": {"label": "VIOLA"}, "VSS": {"label": "GIOLA"}, "VDDPST": {"label": "VIOHA"}, "VSSPST": {"label": "GIOHA"}, "AVDD": {"label": "VDCKB"}}, "ui_x": 150.0, "ui_y": 0, "ui_w": 80.0, "ui_h": 120.0, "ui_rot": "R180"}, {"name": "CORNER_BOTTOMLEFT", "device": "PCORNER", "view_name": "layout", "domain": "null", "pad_width": 130, "pad_height": 130, "position": "bottom_left", "type": "corner", "ui_x": 0, "ui_y": 1220.0, "ui_w": 130.0, "ui_h": 130.0, "ui_rot": "R0"}, {"name": "CORNER_BOTTOMRIGHT", "device": "PCORNER", "view_name": "layout", "domain": "null", "pad_width": 130, "pad_height": 130, "position": "bottom_right", "type": "corner", "ui_x": 1220.0, "ui_y": 1220.0, "ui_w": 130.0, "ui_h": 130.0, "ui_rot": "R90"}, {"name": "CORNER_TOPRIGHT", "device": "PCORNER", "view_name": "layout", "domain": "null", "pad_width": 130, "pad_height": 130, "position": "top_right", "type": "corner", "ui_x": 1220.0, "ui_y": 0, "ui_w": 130.0, "ui_h": 130.0, "ui_rot": "R180"}, {"name": "CORNER_TOPLEFT", "device": "PCORNER", "view_name": "layout", "domain": "null", "pad_width": 130, "pad_height": 130, "position": "top_left", "type": "corner", "ui_x": 0, "ui_y": 0, "ui_w": 130.0, "ui_h": 130.0, "ui_rot": "R270"}]};
                        window.ioEditor.init(data);
                    } catch(err) {
                        console.error("[IOEditor] init dispatch error", err);
                    }
                } else {
                    attempts++;
                    if (attempts < maxRetries) {
                        setTimeout(tryInit, 100);
                    } else {
                        console.error("Failed to initialize IO Editor: Canvas not found.");
                    }
                }
            }
            
            setTimeout(tryInit, 50);
        })();
    </script>
    